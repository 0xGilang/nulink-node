# nulink-node
how to run nulink node
This section will demonstrate how to generate a Worker account using the official build package provided by Ethereum on Ubuntu.
1.Before you run the Nulink node, it would be a good idea to update your Docker on your VPS/VDS

# Add Docker's official GPG key:
$ sudo apt-get update
$ sudo apt-get install ca-certificates curl
$ sudo install -m 0755 -d /etc/apt/keyrings
$ sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
$ sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
$ sudo apt-get update

make sure to install docker used command this 

$ sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin


(created worker account)

$ wget https://gethstore.blob.core.windows.net/builds/geth-linux-amd64-1.10.23-d901d853.tar.gz
Unzip the downloaded installation package
$ tar -xvzf geth-linux-amd64-1.10.23-d901d853.tar.gz
Enter the unzipped directory
$ cd geth-linux-amd64-1.10.23-d901d853/
Use. / get account new -- keystore. / keystore to generate Ethereum account and keystore
$ ./geth account new --keystore ./keystore
You will be prompted to enter the password and confirm the password. Please remember this password for late use.
for example:INFO [09-08|15:30:11.904] Maximum peer count                       ETH=50 LES=0 total=50
INFO [09-08|15:30:11.905] Smartcard socket not found, disabling    err="stat /run/pcscd/pcscd.comm: no such file or directory"
Your new account is locked with a password. Please give a password. Do not forget this password.
Password: 
Repeat password: 

Your new key was generated

DONT DELETED THIS
Public address of the key:   0x8B1819341BEc211a45a2186C4D0030681cccE0Ee
Path of the secret key file: /root/geth-linux-amd64-1.10.23-d901d853/keystore/UTC--2022-09-13T01-14-32.465358210Z--8b1819341bec211a45a2186c4d0030681ccce0ee
DONT DELETED THIS

- You can share your public address with anyone. Others need it to interact with you.
- You must NEVER share the secret key with anyone! The key controls access to your funds!
- You must BACKUP your key file! Without the key, it's impossible to access account funds!
- You must REMEMBER your password! Without the password, it's impossible to decrypt the key!

(NuLink Worker Installation)
NuLink can be run either from a docker container or via local installation. Running Nulink via a docker container simplifies the installation process and negates the need for a local installation. Therefore, it is recommended that you use docker for installation.

Pull the latest NuLink image.
$ docker pull nulink/nulink:latest
Create a directory in your host machine for later usage.
$ cd /root

$ mkdir nulink

Copy the keystore file of the Worker account to the host directory selected in step 3. The private file generated by NuLink Worker will also be stored in this directory.
$ cp /root/geth-linux-amd64-1.10.23-d901d853/keystore/* /root/nulink
Please ensure that this directory has 777 permissions: chmod -R 777 /root/nulink

NuLink Worker Initialization and Running
Run Node via Docker (Recommended)
There are three steps to complete when starting a Worker node via Docker:
1.Export Node Environment Variables
2.Initialize Node Configuration
3.Launch the Node

Export Node Environment Variables
To streamline the Docker installation procedure, we utilize certain environment variables. These variables are crucial for the operation of the NuLink Worker.
Select a password with at least 8 characters to lock and unlock the private storage created by the NuLink Worker. It's important to remember this password for future access.
$ export NULINK_KEYSTORE_PASSWORD=NEWPASSPORT YOUR SURE
This password is used to unlock the keystore file of your Worker account. You would have established this password when creating the Worker account via Geth. Make sure you enter the same one!!!
$ export NULINK_OPERATOR_ETH_PASSWORD=NEWPASSPORT YOUR SURE
FOR EXAMPLE 
export NULINK_OPERATOR_ETH_PASSWORD=KONTOLBADAK123
export NULINK_KEYSTORE_PASSWORD=KONTOLBADAK123

Initialize Node Configuration
This step creates and stores the NuLink worker node configuration, and only needs to be run once.

AND DON'T FORGET TO REMOVE THE SIGN IN BRACKETS LIKE THIS ( )

$ docker run -it --rm \
-p 9151:9151 \
-v /root/nulink:/code \
-v /root/nulink:/home/circleci/.local/share/nulink \
-e NULINK_KEYSTORE_PASSWORD \
nulink/nulink nulink ursula init \
--signer keystore:///code/(REPLACE UTC WITH THE UTC YOU SAVED AT THE BEGINNING) \
--eth-provider https://data-seed-prebsc-2-s2.binance.org:8545 \
--network horus \
--payment-provider https://data-seed-prebsc-2-s2.binance.org:8545 \
--payment-network bsc_testnet \
--operator-address (YOUR WORKER ADDRESS) \
--max-gas-price 10000000000

Example Output:
# step 1
 Detected IPv4 address (8.219.186.125) - Is this the public-facing address of Ursula? [y/N]: y
 
 Please provide a password to lock Operator keys.
 Do not forget this password, and ideally store it using a password manager.
 
 # step 2
 Enter nulink keystore password (8 character minimum): xxxxxx
 Repeat for confirmation: xxxxxx
 
 Backup your seed words, you will not be able to view them again.
 
 xxxxxxxxxxxxxxxxxxxxxxxx
 
 # step 3
 Have you backed up your seed phrase? [y/N]: y
 
 # step 4
 Confirm seed words: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
 
 
Public Key:   02bb2067d21a677ce928967c0ece79a9
Path to Keystore: /home/circleci/.local/share/nulink/keystore

- You can share your public key with anyone. Others need it to interact with you.
- Never share secret keys with anyone! 
- Backup your keystore! Character keys are required to interact with the protocol!
- Remember your password! Without the password, it's impossible to decrypt the key!


Generated configuration file at default filepath /home/circleci/.local/share/nulink/ursula.json

* Review configuration  -> nulink ursula config
* Start working         -> nulink ursula run

Launch the Node
Before performing this step, make sure that the environment variable has been set successfully. You can verify it using the following method, execute the following command:
$ echo $NULINK_KEYSTORE_PASSWORD
$ echo $NULINK_KEYSTORE_PASSWORD
MAKE SURE YOUR PASSWORD DISPLAY IN YOU VPS
The following command will start the node. Make sure you use the same host directory as the configuration.
1: You need to claim some BNB(test) token for Worker account as gas fee.
2: If you encounter error when starting Worker node, first please check that the port 9151 has not been occupied by other process. If still not working, please check there is only one configuration json file in the </path/to/host/machine/directory>

$ docker run --restart on-failure -d \
--name ursula \
-p 9151:9151 \
-v /root/nulink:/code \
-v /root/nulink:/home/circleci/.local/share/nulink \
-e NULINK_KEYSTORE_PASSWORD \
-e NULINK_OPERATOR_ETH_PASSWORD \
nulink/nulink nulink ursula run --no-block-until-ready

Example Output:aa3a0f6376b566473cbcde46b0e772feb4d3658188d2cbb424a1e94588d6d8eb

Check Node Status for Worker Account
The following command describes how to view worker status.
$ docker logs -f <docker name>
Example Input:
$ docker logs -f ursula
Example Output:
Authenticating Ursula
Loaded Ursula (horus)
✓ External IP matches configuration
Starting services
✓ Node Discovery (Horus)
✓ Work Tracking
✓ Start Operator Bonded Tracker
✓ Rest Server https://8.219.186.125:9151
Working ~ Keep Ursula Online!

Now the Worker address(e.g: 0x8B1819341BEc211a45a2186C4D0030681cccE0Ee) is ready for bonding operation.
Restart the Worker Node
Occasionally, the staker may find it necessary to restart the worker node. Below is the command for restarting the currently running nodes:
docker restart <container ID>

DONT FORGET TO BOUND WORKER ADDRESS IN DASHBOARD STAKING

